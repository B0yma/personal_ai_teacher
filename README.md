## **Обзор приложения: "Персональный AI-учитель"**

"Персональный AI-учитель" — это мобильное кроссплатформенное приложение для изучения языков. Его главная особенность — использование искусственного интеллекта (Google Gemini) для создания интерактивных учебных курсов из любого текста, предоставленного пользователем.

Основная концепция приложения заключается в том, чтобы превратить любой интересующий пользователя контент в персонализированный учебный материал. Пользователь может скопировать и вставить в приложение статью, новость, отрывок из книги или любой другой текст, и система на его основе автоматически сгенерирует полноценный курс.

### **Ключевые возможности**

1.  **Генерация курсов с помощью AI:**
    *   Пользователь вставляет текст (от 50 символов) на любом языке.
    *   Приложение отправляет этот текст в модель Gemini, которая анализирует его и создает структурированный курс, разбитый на разделы (юниты) и уроки.
    *   Каждый урок содержит набор интерактивных упражнений, основанных на лексике и грамматике из исходного текста.

2.  **Предложения новых курсов:**
    *   Если у пользователя нет своего текста, он может запросить у AI идеи для новых курсов. Система предложит несколько тем с кратким описанием, и по нажатию на одну из них будет сгенерирован новый курс.

3.  **Разнообразные типы упражнений:**
    *   **Заполнение пропусков (`FILL_BLANK`):** Вставить правильное слово в предложение.
    *   **Выбор правильного варианта (`CHOOSE_VARIANT`):** Выбрать одно слово из нескольких предложенных.
    *   **Сборка предложений (`SENTENCE_ASSEMBLY`):** Составить правильное предложение из набора слов. Корректность проверяется с помощью AI, что допускает грамматически верные альтернативы.
    *   **Аудирование и выбор (`LISTEN_AND_SELECT`):** Прослушать фразу и выбрать правильный текстовый вариант.
    *   **Аудирование и ввод (`LISTEN_AND_WRITE`):** Прослушать фразу и записать ее.
    *   **Оценка понимания смысла (`MEANING_ASSESSMENT`):** Ответить на вопрос по контексту, где правильность ответа оценивает AI.

4.  **Процесс обучения и геймификация:**
    *   **Карта курса:** Весь курс представлен в виде вертикальной карты с уроками. Пользователь проходит их последовательно.
    *   **"Сердца" (жизни):** У пользователя есть ограниченное количество жизней (сердец), которые тратятся при ошибках. Сердца со временем восстанавливаются.
    *   **Кристаллы и опыт (XP):** За прохождение уроков начисляются кристаллы и очки опыта.
    *   **Стрик:** Система отслеживает непрерывную серию ежедневных занятий.
    *   **Повторение ошибок:** Все ошибки, допущенные в уроках, сохраняются. На странице курса появляется кнопка "Повторить ошибки", которая запускает специальный урок, состоящий только из упражнений, где были допущены неточности. Правильный ответ в этом режиме убирает ошибку из списка.

5.  **Уведомления:**
    *   Приложение периодически (каждые 3 минуты, настраивается в конфиге) отправляет локальные уведомления с предложением изучить новые курсы.
    *   При нажатии на уведомление пользователь перенаправляется на страницу с предложениями курсов.

### **Техническая реализация**

*   **Фреймворк:** Flutter, что обеспечивает нативную производительность на iOS и Android из единой кодовой базы.
*   **Искусственный интеллект:** Firebase AI (модели Gemini) для генерации учебного контента, предложений и оценки ответов в упражнениях.
*   **Управление состоянием:** `provider` для централизованного и реактивного управления состоянием приложения (прогресс пользователя, список курсов).
*   **Навигация:** `go_router` для организации навигации между экранами.
*   **Воспроизведение аудио:** `flutter_tts` для локального синтеза речи на устройстве.
*   **Локальные уведомления:** `awesome_notifications` для планирования и отображения уведомлений.
*   **Хранение данных:** `shared_preferences` для сохранения прогресса пользователя и созданных курсов локально на устройстве.
*   **Локализация:** Полная поддержка русского и английского языков для всего интерфейса.

## **Запуск приложения**
*   Для запуска необходимо сгенерировать `firebase_options.dart` и положить рядом с `main.dart`
https://firebase.google.com/docs/flutter/setup?platform=android

## Cписок всех функциональных требований, реализованных в приложении:

### **1. Управление курсами**
*   **Создание курса из текста:** Пользователь может вставить произвольный текст (длиной не менее 50 символов), на основе которого система с помощью AI-модели (Gemini) автоматически генерирует интерактивный учебный курс.
*   **Создание курса по предложению:** Пользователь может выбрать одну из нескольких тем, предложенных AI, для автоматического создания нового курса.
*   **Демонстрационный курс:** Пользователь может запустить предустановленный демонстрационный курс, чтобы ознакомиться с функциональностью приложения без необходимости создавать свой.
*   **Просмотр списка курсов:** На главном экране отображается список всех созданных пользователем курсов.
*   **Удаление курса:** Пользователь может удалить любой курс. При этом также удаляются все данные о прогрессе, связанные с этим курсом.

### **2. Процесс обучения**
*   **Карта курса:** Каждый курс представлен в виде визуальной карты, разделенной на разделы (юниты) и уроки.
*   **Прогресс по урокам:** Уроки на карте имеют статусы: "Заблокировано", "Доступно для начала" (текущий) и "Пройдено".
*   **Разблокировка контента:** Следующий урок или раздел становится доступным только после успешного завершения предыдущего.
*   **Интерактивные упражнения:** Уроки состоят из набора интерактивных упражнений разных типов:
    *   **Вставить пропущенное слово (`FILL_BLANK`):** Заполнить пробел в предложении.
    *   **Выбрать правильный вариант (`CHOOSE_VARIANT`):** Выбрать одно слово из нескольких вариантов.
    *   **Собрать предложение (`SENTENCE_ASSEMBLY`):** Составить предложение из набора слов. Правильность проверяется AI-моделью на грамматическую и семантическую корректность.
    *   **Прослушать и выбрать (`LISTEN_AND_SELECT`):** Прослушать фразу и выбрать правильный текстовый вариант.
    *   **Прослушать и написать (`LISTEN_AND_WRITE`):** Прослушать фразу и записать ее текстом.
    *   **Оценка смысла (`MEANING_ASSESSMENT`):** Дать развернутый ответ на вопрос по заданному контексту. Правильность ответа оценивается AI-моделью.
*   **Воспроизведение аудио:** В упражнениях на аудирование используется система Text-to-Speech для озвучивания текста.

### **3. Игровая механика и прогресс пользователя**
*   **Система "жизней" (сердец):**
    *   У пользователя есть ограниченное количество "жизней" (сердец).
    *   Одна "жизнь" теряется при каждой ошибке в упражнении.
    *   Уроки и сессии повторения ошибок нельзя начать, если у пользователя 0 "жизней".
    *   "Жизни" автоматически пополняются со временем (например, 1 "жизнь" каждые 4 часа).
*   **Система "кристаллов" (Gems):** Пользователь получает "кристаллы" за первое успешное прохождение каждого урока.
*   **Система "опыта" (XP):** Пользователь получает очки опыта за прохождение уроков.
*   **Система "стрика" (Streak):** Система отслеживает количество дней подряд, в которые пользователь занимался.
*   **Сохранение прогресса:** Весь прогресс пользователя (пройденные уроки, количество "жизней", "кристаллов", "стрик", ошибки) сохраняется на устройстве между сессиями.

### **4. Работа над ошибками**
*   **Отслеживание ошибок:** Каждая ошибка, допущенная пользователем, сохраняется с привязкой к конкретному упражнению.
*   **Сессия повторения ошибок:** На экране карты курса появляется кнопка "Повторить ошибки", если есть сохраненные ошибки.
*   **Формирование урока из ошибок:** При нажатии на кнопку "Повторить ошибки" автоматически создается специальный урок, состоящий только из тех упражнений, в которых пользователь ранее ошибся.
*   **Удаление ошибки:** Если пользователь правильно выполняет упражнение во время сессии повторения, эта ошибка удаляется из списка.

### **5. Уведомления**
*   **Запрос разрешения:** При первом запуске приложение запрашивает у пользователя разрешение на отправку уведомлений.
*   **Периодические уведомления:** Приложение периодически (например, каждые 3 минуты) отправляет локальное уведомление с предложением ознакомиться с новыми идеями для курсов.
*   **Переход по уведомлению:** При нажатии на уведомление (неважно, было приложение открыто, в фоне или закрыто) пользователь перенаправляется на страницу с предложениями курсов.

### **6. Пользовательский интерфейс и локализация**
*   **Адаптивный интерфейс:** Экраны приложения (список курсов, предложения, шапка) адаптируются для корректного отображения как на мобильных устройствах, так и на больших экранах (планшетах, десктопе).
*   **Многоязычность (l10n):** Весь пользовательский интерфейс поддерживает два языка: русский и английский. Пользователь может переключаться между ними.
*   **Системная тема:** Приложение автоматически подстраивается под светлую или темную тему операционной системы.
*   **Модальные окна:** Для взаимодействия с пользователем используются информативные модальные окна (например, при нехватке "жизней", завершении урока/раздела, выходе из урока, ошибке генерации курса).